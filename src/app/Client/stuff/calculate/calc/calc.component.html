<div class="container">
  <div class="row">
    <div class="col-12" [formGroup]="OfferControl">
      <mat-icon [matMenuTriggerFor]="menu" class='offer-menu'>more_vert</mat-icon>
      <mat-menu #menu="matMenu" formGroupName="details">
          <button mat-menu-item (click)='createNewObject()'>Добавить объект</button>
          <mat-slide-toggle (change)="calculate()" formControlName="fullObj">Совокупность</mat-slide-toggle>
          <button mat-menu-item (click)='resetForm()'>Сбросить формы</button>
      </mat-menu>
      <div class="container-fluid" formArrayName="objects" *ngFor="let x of OfferControl['controls'].objects['controls']; let i = index">
          <div class="row" [formGroupName]="i">
              <div class="col-12">
                  <mat-form-field appearance="outline">
                      <mat-select (selectionChange)="calculate()" formControlName="regular" placeholder="Регулярность">
                          <mat-option *ngFor="let x of RegularControl;" [value]="x.days">
                              {{x.translate}}
                          </mat-option>
                      </mat-select>
                  </mat-form-field>
  
                  <mat-form-field appearance="outline">
                      <input matInput (change)="calculate()" type="number" formControlName="area" placeholder="Площадь">
                  </mat-form-field>
          
                  <mat-form-field appearance="outline" *ngIf="false">
                      <input matInput (change)="calculate()" type="number" formControlName="time" placeholder="Время на объекте">
                  </mat-form-field>

                  <mat-slide-toggle (change)="calculate()" formControlName="twice">Уборка 2 раза в день</mat-slide-toggle>
                  
              </div>
          </div>

      </div>
      <div class="col-12" [formGroup]="OfferControl">
        <div class="container-fluid" *ngIf="OfferControl.value.details.itog > 0">
          
          <div class="row">
              <div class="col-12">
                  <div class="table row">
                      <div class="col-9 firm-color-bg">
                          <p class="text-center text-white">Тип услуги</p>
                      </div>
                      <div class="col-3 firm-color-bg">
                          <p class="text-center text-white">Стоимость/мес (без НДС)</p>
                      </div>
                      <div class="container-fluid" formArrayName="objects"  *ngFor="let x of OfferControl['controls'].objects['controls']; let i = index">
                        <div class="row" *ngIf="OfferControl.value.objects[i].details.itog > 0 && OfferControl.value.objects[i].area > 0">
                            <div class="col-9">
                                <p class="text-center">Уборка помещения ~{{OfferControl.value.objects[i].area}} м<sup>2</sup>
                                  <span *ngFor="let m of RegularControl"><span *ngIf="m.days === OfferControl.value.objects[i].regular">, в графике {{m.translate}}</span></span>
                                  <span>, ~время уборки {{OfferControl.value.objects[i].employees[0].timeToWorkPerDay | number:'1.0-0'}} час(а)</span>
                                  <br><span>Уборочный инвентарь и химия приобретается Заказчиком</span>
                                  
                    
                                </p>
                            </div>
                            <div class="col-3">
                                <p class="text-center">{{OfferControl.value.objects[i].details.itog | number:'1.0-0' }} <span class="font-weight-bold">₽</span></p>
                            </div>
                        </div>
                      </div>
                                     
                              
                  </div>
              </div>
          </div>

          <div class="row">
              <div class="col-12">
                <p class="font-weight-bold">* При заключении договора, будет проведена полная генеральная уборка, на сумму не превышающую 20% от стоимости объекта. (За исключением послестроительной уборки)</p>
              </div>
            </div>
        </div>

        <div class="container-fluid" *ngIf="OfferControl.value.details.itog > 0">
          <div class="row">
            <div class="col-12">
                <div class="container-fluid" style="page-break-after: always;">
                    <div class="row table" style="margin-top: 50px;">
            
                        <div class="col-1 text-center font-weight-bold">
                            #
                        </div>
                        <div class="col-8 text-center font-weight-bold">
                            Перечень услуг по уборке помещений
                        </div>
                        <div class="col-3 text-center font-weight-bold">
                            Периодичность
                        </div>
            <!-- {{!-- 1 --}} -->
                        <div class="col-1 text-center">
                            1
                        </div>
                        <div class="col-8">
                            Сухая и влажная уборка пола c приминением моющих средств
                        </div>
                        <div class="col-3 text-center">
                            1 раз в день
                        </div>
            <!-- {{!-- 2 --}} -->
                        <div class="col-1 text-center">
                            2
                        </div>
                        <div class="col-8">
                            Вынос мусора из мусорных корзин, замена полиэтиленовых пакетов
                        </div>
                        <div class="col-3 text-center">
                            1 раз в день
                        </div>
            <!-- {{!-- 3 --}} -->
                        <div class="col-1 text-center">
                            3
                        </div>
                        <div class="col-8">
                            Протирка металлических перил и поручней
                        </div>
                        <div class="col-3 text-center">
                            1 раз в день
                        </div>
            <!-- {{!-- 4 --}} -->
                        <div class="col-1 text-center">
                            4
                        </div>
                        <div class="col-8">
                            Мытье сан. узла <br> (чистка зеркал, дезинфекция унитазов, раковин, уборка пола)
                        </div>
                        <div class="col-3 text-center">
                            1 раз в день
                        </div>
            <!-- {{!-- 5 --}} -->
                        <div class="col-1 text-center">
                            5
                        </div>
                        <div class="col-8">
                            Удаление пыли с твердых поверхностей <br>(подоконники, верхние фасады шкафов, дверные блоки)
                        </div>
                        <div class="col-3 text-center">
                            1 раз в неделю
                        </div>
            <!-- {{!-- 6 --}} -->
                        <div class="col-1 text-center">
                            6
                        </div>
                        <div class="col-8">
                            Чистка настенной кафельной плитки
                        </div>
                        <div class="col-3 text-center">
                            1 раз в неделю
                        </div>
            <!-- {{!-- 7 --}} -->
                        <div class="col-1 text-center">
                            7
                        </div>
                        <div class="col-8">
                            Мытье микроволновой печи
                        </div>
                        <div class="col-3 text-center">
                            1 раз в неделю
                        </div>
            <!-- {{!-- 8 --}} -->
                        <div class="col-1 text-center">
                            8
                        </div>
                        <div class="col-8">
                            Удаление пыли с розеток, оргтехники, плинтусов, ножек столов и стульев
                        </div>
                        <div class="col-3 text-center">
                            1 раз в неделю
                        </div>
            <!-- {{!-- 9 --}} -->
                        <div class="col-1 text-center">
                            9
                        </div>
                        <div class="col-8">
                            Мытье холодильника <br> (В случае если он не требует разморозки)
                        </div>
                        <div class="col-3 text-center">
                            1 раз в месяц
                        </div>
            
            <!-- {{!-- 10 --}} -->
                        <div class="col-1 text-center">
                            10
                        </div>
                        <div class="col-8">
                            Мытье окон
                        </div>
                        <div class="col-3 text-center">
                            2 раза в год
                        </div>
                        
                    </div>
            
                    <div class="row" style="margin-top: 50px;">
            
                        <div class="col-12">
                            <p class="font-weight-bold">Инвентарь и оборудование, используемые при работах</p>
                        <ol>
                            <li>Уборочный инвентарь</li>
                            <li>Средство для мытья пола D-Concentrate PRO-Brite</li>
                            <li>Средство для мытья сантехники Asin Pro-Brite</li>
                        </ol>
                        </div>
                        
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>